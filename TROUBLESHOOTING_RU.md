# Руководство по устранению неполадок

## Частые ошибки и их решения

### 1. Ошибка: ModuleNotFoundError: No module named 'PIL'

**Причина:** Библиотека Pillow не установлена или установлена не в правильное место.

**Решение:**
1. Запустите `setup_and_run.bat` для полной установки всех зависимостей
2. Или запустите `install.bat` для установки только библиотек
3. Убедитесь, что вы запускаете приложение через `run.bat`, а не напрямую

### 2. Ошибка: ModuleNotFoundError: No module named 'rembg'

**Причина:** Библиотека rembg не установлена.

**Решение:**
1. Запустите `setup_and_run.bat` или `install.bat`
2. Убедитесь, что у вас есть подключение к интернету во время установки

### 3. Ошибка: ModuleNotFoundError: No module named 'onnxruntime'

**Причина:** Библиотека onnxruntime не установлена.

**Решение:**
1. Запустите `setup_and_run.bat` или `install.bat`
2. Убедитесь, что у вас есть подключение к интернету во время установки

### 4. Ошибка: Python не установлен или не добавлен в PATH

**Причина:** Python не установлен или не добавлен в переменные среды.

**Решение:**
1. Скачайте и установите Python с официального сайта: https://www.python.org/downloads/
2. При установке ОБЯЗАТЕЛЬНО поставьте галочку "Add Python to PATH"
3. Перезагрузите компьютер после установки

### 5. Ошибка: Виртуальная среда не найдена

**Причина:** Виртуальная среда не была создана или была удалена.

**Решение:**
1. Запустите `setup_and_run.bat` для создания виртуальной среды и установки всех зависимостей
2. Или запустите `install.bat` только для создания виртуальной среды и установки библиотек

### 6. Проблемы с установкой библиотек (таймаут, ошибка соединения)

**Причина:** Проблемы с подключением к интернету или блокировка антивирусом.

**Решение:**
1. Проверьте подключение к интернету
2. Временно отключите антивирус на время установки
3. Попробуйте запустить установку позже
4. Если проблема сохраняется, попробуйте установить библиотеки вручную:
   ```
   pip install rembg onnxruntime pillow
   ```

### 7. Приложение не запускается или вылетает

**Причина:** Ошибки в коде или проблемы с графической библиотекой.

**Решение:**
1. Убедитесь, что все файлы проекта на месте
2. Перезапустите `setup_and_run.bat` для переустановки
3. Проверьте, что Python правильно установлен

### 8. Ошибка "Не удалось проверить библиотеки" во время установки

**Причина:** Одна или несколько библиотек не были установлены правильно, несмотря на отсутствие ошибок во время установки.

**Решение:**
1. Проверьте подключение к интернету
2. Временно отключите антивирус
3. Попробуйте перезапустить `setup_and_run.bat`
4. Если проблема сохраняется, попробуйте установить библиотеки по отдельности:
   ```
   pip install rembg
   pip install onnxruntime
   pip install Pillow
   ```

### 9. Проблемы с существующей виртуальной средой

**Причина:** Конфликты с предыдущей установкой или поврежденная виртуальная среда.

**Решение:**
1. Закройте все окна командной строки
2. Удалите папку `bgremover_env` вручную (если она существует)
3. Перезапустите `setup_and_run.bat` или `install.bat`

## Порядок действий для корректной работы

1. **Установка:**
   - Дважды щелкните `setup_and_run.bat` ИЛИ
   - Дважды щелкните `install.bat`

2. **Запуск:**
   - После установки дважды щелкните `run.bat`

3. **Использование:**
   - Нажмите "Выбрать изображение"
   - Выберите файл с изображением
   - Нажмите "Удалить фон"
   - Сохраните результат

## Проверка установки вручную

Если вы хотите проверить установку вручную, выполните следующие шаги:

1. Откройте командную строку (cmd)
2. Перейдите в папку проекта:
   ```
   cd путь\к\проекту\AiRemovingBackground
   ```
3. Активируйте виртуальную среду:
   ```
   bgremover_env\Scripts\activate
   ```
4. Проверьте установку библиотек по отдельности:
   ```
   python -c "import rembg; print('rembg установлен')"
   python -c "import onnxruntime; print('onnxruntime установлен')"
   python -c "import PIL; print('PIL установлен')"
   ```

Если каждая команда выводит сообщение об успешной установке, значит все библиотеки установлены правильно.

## Ручная очистка и переустановка

Если автоматическая установка продолжает давать сбои, попробуйте ручную очистку:

1. Закройте все окна командной строки и PowerShell
2. Удалите папку `bgremover_env` вручную
3. Откройте новое окно командной строки от имени администратора
4. Перейдите в папку проекта:
   ```
   cd путь\к\проекту\AiRemovingBackground
   ```
5. Создайте новую виртуальную среду:
   ```
   python -m venv bgremover_env
   ```
6. Активируйте виртуальную среду:
   ```
   bgremover_env\Scripts\activate
   ```
7. Обновите pip:
   ```
   python -m pip install --upgrade pip
   ```
8. Установите библиотеки по одной:
   ```
   pip install rembg
   pip install onnxruntime
   pip install Pillow
   ```
9. Проверьте установку:
   ```
   python -c "import rembg, onnxruntime, PIL; print('Все библиотеки установлены')"
   ```